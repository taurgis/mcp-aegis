description: "Advanced MCP testing scenarios"
tests:
  - it: "should handle tool calls with complex parameters"
    request:
      jsonrpc: "2.0"
      id: "advanced-1"
      method: "tools/call"
      params:
        name: "read_file"
        arguments:
          path: "../shared-test-data/nonexistent.txt"
    expect:
      response:
        jsonrpc: "2.0"
        id: "advanced-1"
        result:
          isError: true
          content:
            - type: "text"
              text: "match:File not found.*ENOENT"
      stderr: "toBeEmpty"

  - it: "should validate tool schema compliance"
    request:
      jsonrpc: "2.0"
      id: "advanced-2"
      method: "tools/list"
      params: {}
    expect:
      response:
        jsonrpc: "2.0"
        id: "advanced-2"
        result:
          tools:
            - name: "read_file"
              description: "match:.+"
              inputSchema:
                type: "object"
                properties:
                  path:
                    type: "string"
                required:
                  - "path"
