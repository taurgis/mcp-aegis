description: "Failing String Pattern Tests - Clean Pattern-Only Failures (structural fields ignored via match:partial)"
tests:
  # These tests intentionally fail ONLY on string pattern logic.
  # Structural fields like description, inputSchema, type, isError are ignored using match:partial.

  # Test 1: Contains failure (no extra field noise)
  - it: "should fail when string doesn't contain expected substring"
    request:
      jsonrpc: "2.0"
      id: "string-fail-1"
      method: "tools/list"
      params: {}
    expect:
      response:
        jsonrpc: "2.0"
        id: "string-fail-1"
        result:
          match:partial:
            tools:
              match:arrayElements:
                name: "match:contains:nonexistent"  # ❌ pattern-only failure

  # Test 2: StartsWith failure
  - it: "should fail when string doesn't start with expected prefix"
    request:
      jsonrpc: "2.0"
      id: "string-fail-2"
      method: "tools/list"
      params: {}
    expect:
      response:
        jsonrpc: "2.0"
        id: "string-fail-2"
        result:
          match:partial:
            tools:
              match:arrayElements:
                description: "match:startsWith:Wrong"  # ❌ pattern-only failure

  # Test 3: EndsWith failure
  - it: "should fail when string doesn't end with expected suffix"
    request:
      jsonrpc: "2.0"
      id: "string-fail-3"
      method: "tools/list"
      params: {}
    expect:
      response:
        jsonrpc: "2.0"
        id: "string-fail-3"
        result:
          match:partial:
            tools:
              match:arrayElements:
                name: "match:endsWith:wrong_suffix"  # ❌ pattern-only failure

  # Test 4: Regex failure
  - it: "should fail when string doesn't match regex pattern"
    request:
      jsonrpc: "2.0"
      id: "string-fail-4"
      method: "tools/list"
      params: {}
    expect:
      response:
        jsonrpc: "2.0"
        id: "string-fail-4"
        result:
          match:partial:
            tools:
              match:arrayElements:
                name: "match:regex:^[A-Z][a-z]+$"  # ❌ pattern-only failure

  # Test 5: Email regex failure (file content)
  - it: "should fail when content doesn't match email regex"
    request:
      jsonrpc: "2.0"
      id: "string-fail-5"
      method: "tools/call"
      params:
        name: "read_file"
        arguments:
          path: "../shared-test-data/hello.txt"
    expect:
      response:
        jsonrpc: "2.0"
        id: "string-fail-5"
        result:
          match:partial:
            content:
              match:arrayElements:
                text: "match:regex:[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}"  # ❌ pattern-only failure

  # Test 6: Case-insensitive contains failure
  - it: "should fail when case-insensitive contains doesn't match"
    request:
      jsonrpc: "2.0"
      id: "string-fail-6"
      method: "tools/call"
      params:
        name: "read_file"
        arguments:
          path: "../shared-test-data/hello.txt"
    expect:
      response:
        jsonrpc: "2.0"
        id: "string-fail-6"
        result:
          match:partial:
            content:
              match:arrayElements:
                text: "match:icontains:NONEXISTENT"  # ❌ pattern-only failure

  # Test 7: StartsWith failure inside arrayElements
  - it: "should fail when multiple string patterns don't match in array"
    request:
      jsonrpc: "2.0"
      id: "string-fail-7"
      method: "tools/call"
      params:
        name: "read_file"
        arguments:
          path: "../shared-test-data/hello.txt"
    expect:
      response:
        jsonrpc: "2.0"
        id: "string-fail-7"
        result:
          match:partial:
            content:
              match:arrayElements:
                text: "match:startsWith:Goodbye"  # ❌ pattern-only failure

  # Test 8: Date-like regex failure
  - it: "should fail when text doesn't match numeric regex"
    request:
      jsonrpc: "2.0"
      id: "string-fail-8"
      method: "tools/call"
      params:
        name: "read_file"
        arguments:
          path: "../shared-test-data/hello.txt"
    expect:
      response:
        jsonrpc: "2.0"
        id: "string-fail-8"
        result:
          match:partial:
            content:
              match:arrayElements:
                text: "match:regex:\\d{4}-\\d{2}-\\d{2}"  # ❌ pattern-only failure

  # Test 9: UUID regex failure
  - it: "should fail when content doesn't match UUID pattern"
    request:
      jsonrpc: "2.0"
      id: "string-fail-9"
      method: "tools/list"
      params: {}
    expect:
      response:
        jsonrpc: "2.0"
        id: "string-fail-9"
        result:
          match:partial:
            tools:
              match:arrayElements:
                name: "match:regex:[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}"  # ❌ pattern-only failure

  # Test 10: Length failure
  - it: "should fail when string length expectation is wrong"
    request:
      jsonrpc: "2.0"
      id: "string-fail-10"
      method: "tools/call"
      params:
        name: "read_file"
        arguments:
          path: "../shared-test-data/hello.txt"
    expect:
      response:
        jsonrpc: "2.0"
        id: "string-fail-10"
        result:
          match:partial:
            content:
              match:arrayElements:
                text: "match:length:50"  # ❌ pattern-only failure

  # Test 11: Multiple pattern failures (contains + endsWith) in same element
  - it: "should fail with multiple incorrect string expectations"
    request:
      jsonrpc: "2.0"
      id: "string-fail-11"
      method: "tools/list"
      params: {}
    expect:
      response:
        jsonrpc: "2.0"
        id: "string-fail-11"
        result:
          match:partial:
            tools:
              match:arrayElements:
                name: "match:contains:delete"       # ❌ pattern-only failure
                description: "match:endsWith:delete" # ❌ pattern-only failure
